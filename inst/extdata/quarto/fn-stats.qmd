---
title: "Historical Data"
execute:
  echo: false
format: 
  html:
    fig-width: 8
    fig-height: 4
    code-fold: false
---

```{r load-pkg, echo = FALSE, message = FALSE}
library (githist)
library (lubridate)
```
This page includes several graphs providing insight into the historical
development of ...

```{r load-data}
dat <- readRDS ("results.Rds")
nrow (dat$stats)
```
```{r stats-data}
cols <- names (dat$stats) [which (!names (dat$stats) %in% c ("package", "version"))]
stats <- dat$stats [, cols]
stats$date <- lubridate::ymd (strftime (stats$date, "%y-%m-%d"))
```

```{r ojs-in-stats, echo = FALSE}
ojs_define (stats_in = stats)
```
```{ojs stats-transpose}
stats = {
    return transpose(stats_in)
}
viewof measure = Inputs.checkbox(
    ["mean", "median", "sum"],
    { value: ["mean"],
        label: "Measure:"
    }
)
statsFiltered = stats.filter(function(row) {
  return measure.includes(row.measure)
})
statsFiltered
```

```{ojs stats-plot}
Plot.plot({
    style: `
        overflow: visible;
    `,
    marginLeft: 60,
    marginBottom: 50,
    x: {grid: true},
    y: {grid: true},
    marks: [
        Plot.ruleY([0]),
        Plot.lineY(
            statsFiltered,
            {
                x: "date",
                y: "npars",
                fontSize: 18
            }
        ),
        Plot.axisX(
            {
                fontSize: 14,
                label: "",
                labelArrow: false
            }
        ),
        Plot.axisX(
            {
                fontSize: 20,
                label: "Year",
                labelAnchor: "center",
                labelOffset: 40,
                ticks: []
            }
        ),
        Plot.axisY(
            {
                fontSize: 14,
                label: "",
                labelArrow: false
            }
        ),
        Plot.axisY(
            {
                fontSize: 24,
                label: "Value",
                labelAnchor: "center",
                labelOffset: 55,
                ticks: []
            }
        ),
    ]
})
```
